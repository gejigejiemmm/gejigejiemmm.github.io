<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.64.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Mybatisplus&nbsp;&ndash;&nbsp;gejigejiemmm</title><link rel="stylesheet" href="/css/core.min.a5d63d306fa53cba7bcef6c96fd6b55a008ea5736acaf25aace71f2bd7b379b2d97257d9c332e405e82f4f6e980f8409.css" integrity="sha384-pdY9MG&#43;lPLp7zvbJb9a1WgCOpXNqyvJarOcfK9ezebLZclfZwzLkBegvT26YD4QJ"><body>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/tomato.png" alt /><span class="site name">gejigejiemmm</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="https://github.com/gejigejiemmm/"target="_blank">Github</a><a class="nav item" href="https://gohugo.io/"target="_blank">Hugo</a></nav></div></span></div><div class="site slogan"><span class="title">haloğŸ˜Š</span></div></section><div id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Mybatisplus</h1><p class="article date">Wednesday, March 11, 2020</p></section><article class="article markdown-body"><p>æœ€è¿‘çªç„¶æƒ³å­¦ä¸€ä¸‹mybatis-pluså¸Œæœ›å°½å¿«æä¸Šæ—¥ç¨‹å§ã€‚
å¥½äº†ï¼Œæä¸Šæ—¥ç¨‹ï¼Œå†²å†²å†²</p>
<h2 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</h2>
<p>è¿™é‡Œè´´ä¸€ä¸ªå®˜ç½‘è¿æ¥ <a href="https://mp.baomidou.com/guide/quick-start.html#%E9%85%8D%E7%BD%AE"target="_blank">mybatis-plus</a>
ç…§ç€ä»–ä»¬ä¸€æ­¥æ­¥æ¥å°±å¯ä»¥äº†ï¼Œæœ‰äº›çœäº‹ï¼Œä½†ç¡®å®å†™çš„éå¸¸è¯¦ç»†ã€‚</p>
<h3 id="basemapper-ä¸­çš„-insertæ–¹æ³•çš„é»˜è®¤-ç­–ç•¥">BaseMapper ä¸­çš„ insertæ–¹æ³•çš„é»˜è®¤ ç­–ç•¥</h3>
<p>åœ¨ mp(mybatis-plus) ä¸­ï¼Œä½ æ˜¯ç”¨ insertæ–¹æ³•çš„æ—¶å€™ï¼Œæ˜¯ä¼šè‡ªåŠ¨å°†id å›å¡«åˆ°çš„å¯¹è±¡ä¸­çš„ï¼Œä½†æ˜¯é»˜è®¤æƒ…å†µç”Ÿæˆçš„æ˜¯è¿™ç§ä¸€è¿ä¸²çš„ æ•°å­—</p>
<p><a target="_blank" rel="noopener noreferrer" 
  href="/img/mp-insert.png"><img  src="/img/mp-insert.png"
        alt="mp-insert"/></a></p>
<p>è¿™ç§ç”Ÿæˆæ–¹å¼ï¼Œé‡‡ç”¨çš„æ˜¯ Twitterçš„é›ªèŠ±ç®—æ³•ï¼Œå…·ä½“äº†è§£å¯ç™¾åº¦ï¼Œä¿è¯äº†åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹idä¹Ÿå”¯ä¸€ã€‚</p>
<p>å¦‚æœä½ æƒ³ä½¿ç”¨ ä¸»é”®è‡ªå¢çš„æ–¹å¼ï¼Œä½ éœ€è¦å°†æ•°æ®åº“è¡¨ä¸­çš„ ä¸»é”®è‡ªå¢æ‰“å¼€ï¼Œç„¶ååœ¨ id å±æ€§ä¸ŠåŠ  @TableId(type = IdType.AUTO)</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="c1">//ä¸»é”®è‡ªå¢
</span><span class="c1"></span>    <span class="nd">@TableId</span><span class="o">(</span><span class="n">type</span> <span class="o">=</span> <span class="n">IdType</span><span class="o">.</span><span class="na">AUTO</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div><p>è™½ç„¶åˆ†å¸ƒå¼ä¸‹é‡‡ç”¨é»˜è®¤çš„ç”Ÿæˆç­–ç•¥è¾ƒå¥½ï¼Œä½†æ˜¯æ¯•ç«Ÿèº«ä¸ºå¤§ä¸‰ç‹—ï¼Œæˆ‘å†™çš„ä¹Ÿéƒ½æ˜¯å°é¡¹ç›®ã€‚æ‰€ä»¥å°±å…ˆç”¨è‡ªå¢å§ã€‚</p>
<p><a href="https://mp.baomidou.com/guide/annotation.html#tableid"target="_blank">@TableId å…·ä½“å±æ€§è‡ªè¡ŒæŸ¥çœ‹å“¦</a></p>
<h3 id="update-æ–¹æ³•">update æ–¹æ³•</h3>
<p>mpçš„ update æ˜¯ æ‰§è¡Œçš„æ˜¯åŠ¨æ€sql, ä¹Ÿå°±æ˜¯æ¡ä»¶ä¿®æ”¹</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">testUpdate</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1238647983271899149L</span><span class="o">)</span><span class="o">;</span>
        <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">user</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">20</span><span class="o">)</span><span class="o">;</span>
        <span class="n">userMapper</span><span class="o">.</span><span class="na">updateById</span><span class="o">(</span><span class="n">user</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div><p>ä½ å¯¹è±¡é‡Œæ²¡æœ‰çš„å­—æ®µï¼Œæ˜¯ä¸ä¼šè¿›è¡Œä¿®æ”¹çš„</p>
<p><a target="_blank" rel="noopener noreferrer" 
  href="/img/mp-update.png"><img  src="/img/mp-update.png"
        alt="mp-update.png"/></a></p>
<h4 id="å…³äº-create_time-å’Œ-update_time-çš„é—®é¢˜">å…³äº create_time å’Œ update_time çš„é—®é¢˜</h4>
<p>åœ¨é˜¿é‡Œå¼€å‘æ‰‹å†Œä¸­å†™äº†ï¼Œæ•°æ®è¡¨å¿…é¡»è¦æœ‰è¿™ä¸¤ä¸ªå­—æ®µã€‚
æ‰€ä»¥ä¸å…ä¼šæƒ³åˆ°ï¼Œè¿™ä¸¤ä¸ªå­—æ®µèƒ½ä¸èƒ½è‡ªåŠ¨ç”Ÿæˆæˆ–æ›´æ–°ï¼Œä¸é€šè¿‡æ¯æ¬¡åˆ›å»ºæ—¶é—´ã€‚</p>
<p>ä¸€èˆ¬æœ‰ä¸¤ç§ç­–ç•¥
ä¹‹å‰æˆ‘ç”¨çš„å°±æ˜¯è¿™ç§</p>
<ul>
<li>
<p>æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆ
<a target="_blank" rel="noopener noreferrer" 
  href="/img/mp-datetime.png"><img  src="/img/mp-datetime.png"
        alt="mp-datetime.png"/></a>
å¯¹è¿™ä¸¤ä¸ªå­—æ®µè®¾ç½®é»˜è®¤å€¼ä¸º CURRENT_TIMESTAMP ï¼Œupdateéœ€è¦åœ¨ æ ¹æ®æ—¶é—´æˆ³æ›´æ–°é‚£é‡Œæ‰“ä¸Šå‹¾</p>
</li>
<li>
<p>mp ç”Ÿæˆè‡ªåŠ¨å¡«å……</p>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="c1">//æ’å…¥çš„æ—¶å€™è‡ªåŠ¨å¡«å……
</span><span class="c1"></span>    <span class="nd">@TableField</span><span class="o">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">LocalDateTime</span> <span class="n">createTime</span><span class="o">;</span>
    <span class="c1">//æ’å…¥å’Œæ›´æ–°çš„æ—¶å€™è‡ªåŠ¨å¡«å……
</span><span class="c1"></span>    <span class="nd">@TableField</span><span class="o">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT_UPDATE</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">LocalDateTime</span> <span class="n">updateTime</span><span class="o">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//è‡ªåŠ¨å¡«å…… å¢å¼ºç±» è¿™é‡Œçš„cretaeTimeæ˜¯å®ä½“ç±»å±æ€§è€Œä¸æ˜¯æ•°æ®åº“å­—æ®µå
</span><span class="c1"></span><span class="nd">@Slf4j</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMetaObjectHandler</span> <span class="kd">implements</span> <span class="n">MetaObjectHandler</span> <span class="o">{</span>

    <span class="c1">//æ’å…¥å¡«å……
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertFill</span><span class="o">(</span><span class="n">MetaObject</span> <span class="n">metaObject</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//è‡ªåŠ¨å¡«å……æ—¶é—´
</span><span class="c1"></span>        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;insertFill running&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ å­—æ®µåï¼Œå¡«å……å€¼ï¼Œå…ƒæ•°æ®
</span><span class="c1"></span>        <span class="k">this</span><span class="o">.</span><span class="na">setFieldValByName</span><span class="o">(</span><span class="s">&#34;createTime&#34;</span><span class="o">,</span> <span class="n">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">(</span><span class="o">)</span><span class="o">,</span><span class="n">metaObject</span><span class="o">)</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">setFieldValByName</span><span class="o">(</span><span class="s">&#34;updateTime&#34;</span><span class="o">,</span> <span class="n">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">(</span><span class="o">)</span><span class="o">,</span><span class="n">metaObject</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">//æ›´æ–°å¡«å……
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateFill</span><span class="o">(</span><span class="n">MetaObject</span> <span class="n">metaObject</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//è‡ªåŠ¨å¡«å……æ—¶é—´
</span><span class="c1"></span>        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;updateFill running&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ å­—æ®µåï¼Œå¡«å……å€¼ï¼Œå…ƒæ•°æ®
</span><span class="c1"></span>        <span class="k">this</span><span class="o">.</span><span class="na">setFieldValByName</span><span class="o">(</span><span class="s">&#34;updateTime&#34;</span><span class="o">,</span> <span class="n">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">(</span><span class="o">)</span><span class="o">,</span><span class="n">metaObject</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h3 id="æŸ¥è¯¢">æŸ¥è¯¢</h3>
<h4 id="æ‰¹é‡æŸ¥è¯¢">æ‰¹é‡æŸ¥è¯¢</h4>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="c1">//æ‰¹é‡æŸ¥è¯¢ in(1, 2, 3)
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">testSelectBatchIds</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectBatchIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">2</span><span class="o">,</span> <span class="n">3</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
        <span class="n">users</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div><h4 id="æ¡ä»¶æŸ¥è¯¢">æ¡ä»¶æŸ¥è¯¢</h4>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="c1">//ç®€å•çš„ æ¡ä»¶æŸ¥è¯¢
</span><span class="c1"></span>    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">testSelectByMap</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="o">&gt;</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="s">&#34;hello&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;email&#34;</span><span class="o">,</span><span class="s">&#34;geji@qq.com&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectByMap</span><span class="o">(</span><span class="n">map</span><span class="o">)</span><span class="o">;</span>
        <span class="n">users</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div><h4 id="åˆ†é¡µæŸ¥è¯¢">åˆ†é¡µæŸ¥è¯¢</h4>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">testSelectPage</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Page</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userPage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">&lt;</span><span class="o">&gt;</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">5</span><span class="o">)</span><span class="o">;</span>
        <span class="n">userMapper</span><span class="o">.</span><span class="na">selectPage</span><span class="o">(</span><span class="n">userPage</span><span class="o">,</span> <span class="kc">null</span><span class="o">)</span><span class="o">;</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">records</span> <span class="o">=</span> <span class="n">userPage</span><span class="o">.</span><span class="na">getRecords</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">records</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">:</span><span class="o">:</span><span class="n">println</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div><h3 id="é€»è¾‘åˆ é™¤">é€»è¾‘åˆ é™¤</h3>
<p>æ•°æ®åº“æ·»åŠ é€»è¾‘å­—æ®µ
åœ¨å®ä½“ç±»é‡Œä¹Ÿæ·»åŠ å­—æ®µ</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="c1">//è¡¨ç¤ºå½“å‰å­—æ®µä¸ºé€»è¾‘åˆ é™¤å­—æ®µï¼Œé»˜è®¤1åˆ é™¤ï¼Œ0æœªåˆ é™¤
</span><span class="c1"></span>    <span class="nd">@TableLogic</span>
    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">isDeleted</span><span class="o">;</span>
</code></pre></div><h3 id="ä»£ç ç”Ÿæˆå™¨">ä»£ç ç”Ÿæˆå™¨</h3>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">testCodeGenerator</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.åˆ›å»ºä»£ç ç”Ÿæˆå™¨
</span><span class="c1"></span>        <span class="n">AutoGenerator</span> <span class="n">mpg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AutoGenerator</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>


        <span class="c1">//2.å…¨å±€é…ç½®
</span><span class="c1"></span>        <span class="n">GlobalConfig</span> <span class="n">gc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GlobalConfig</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//è·å–å½“å‰é¡¹ç›®çš„è·¯å¾„
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">projectPath</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&#34;user.dir&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">gc</span><span class="o">.</span><span class="na">setOutputDir</span><span class="o">(</span><span class="n">projectPath</span> <span class="o">+</span> <span class="s">&#34;/src/main/java&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">gc</span><span class="o">.</span><span class="na">setAuthor</span><span class="o">(</span><span class="s">&#34;geji&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//ç”Ÿæˆåæ˜¯å¦æ‰“å¼€èµ„æºç®¡ç†å™¨
</span><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setOpen</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//ç”Ÿæˆæ–‡ä»¶çš„æ—¶å€™æ˜¯å¦é‡æ–°è¦†ç›–
</span><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setFileOverride</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//è®¾ç½®ä¸»é”®ç­–ç•¥
</span><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setIdType</span><span class="o">(</span><span class="n">IdType</span><span class="o">.</span><span class="na">AUTO</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//è®¾ç½®Serviceé¦–å­—æ¯å»é™¤I
</span><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setServiceName</span><span class="o">(</span><span class="s">&#34;%sService&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//è®¾ç½®æ—¥æœŸç±»å‹
</span><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setDateType</span><span class="o">(</span><span class="n">DateType</span><span class="o">.</span><span class="na">TIME_PACK</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//å®ä½“å±æ€§ Swagger2 æ³¨è§£
</span><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setSwagger2</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>

        <span class="n">mpg</span><span class="o">.</span><span class="na">setGlobalConfig</span><span class="o">(</span><span class="n">gc</span><span class="o">)</span><span class="o">;</span>


        <span class="c1">//3.æ•°æ®æºé…ç½®
</span><span class="c1"></span>        <span class="n">DataSourceConfig</span> <span class="n">dsc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataSourceConfig</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">dsc</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="s">&#34;jdbc:mysql://127.0.0.1:3306/mybatis-plus?serverTimezone=Asia/Shanghai&amp;useUnicode=yes&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">// dsc.setSchemaName(&#34;public&#34;);
</span><span class="c1"></span>        <span class="n">dsc</span><span class="o">.</span><span class="na">setDriverName</span><span class="o">(</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">dsc</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">dsc</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&#34;123456&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">mpg</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="n">dsc</span><span class="o">)</span><span class="o">;</span>


        <span class="c1">// åŒ…é…ç½®
</span><span class="c1"></span>        <span class="n">PackageConfig</span> <span class="n">pc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PackageConfig</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
<span class="c1">//        pc.setModuleName(scanner(&#34;æ¨¡å—å&#34;));
</span><span class="c1"></span>        <span class="n">pc</span><span class="o">.</span><span class="na">setParent</span><span class="o">(</span><span class="s">&#34;cn.edu.zzuli.MybatisPlusGenerate&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">pc</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="s">&#34;entity&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">pc</span><span class="o">.</span><span class="na">setController</span><span class="o">(</span><span class="s">&#34;controller&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">pc</span><span class="o">.</span><span class="na">setService</span><span class="o">(</span><span class="s">&#34;service&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">pc</span><span class="o">.</span><span class="na">setMapper</span><span class="o">(</span><span class="s">&#34;mapper&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="n">mpg</span><span class="o">.</span><span class="na">setPackageInfo</span><span class="o">(</span><span class="n">pc</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//ç­–ç•¥é…ç½®
</span><span class="c1"></span>        <span class="n">StrategyConfig</span> <span class="n">strategy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StrategyConfig</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//strategy.setInclude(&#34;xxx&#34;+&#34;_\\w*&#34;);//æ˜ å°„çš„è¡¨å
</span><span class="c1"></span>        <span class="c1">//strategy.setTablePrefix(&#34;xxx_&#34;);//ä¸ç”Ÿæˆè¡¨çš„å‰ç¼€
</span><span class="c1"></span>        <span class="n">strategy</span><span class="o">.</span><span class="na">setNaming</span><span class="o">(</span><span class="n">NamingStrategy</span><span class="o">.</span><span class="na">underline_to_camel</span><span class="o">)</span><span class="o">;</span><span class="c1">//é©¼å³°ç­–ç•¥
</span><span class="c1"></span>        <span class="c1">//strategy.setColumnNaming(NamingStrategy.underline_to_camel);
</span><span class="c1"></span>
        <span class="c1">//è‡ªåŠ¨æ·»åŠ  lombokçš„æ³¨è§£
</span><span class="c1"></span>        <span class="n">strategy</span><span class="o">.</span><span class="na">setEntityLombokModel</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>
        <span class="n">strategy</span><span class="o">.</span><span class="na">setLogicDeleteFieldName</span><span class="o">(</span><span class="s">&#34;is_deleted&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//å»é™¤booleanå€¼çš„å‰ç¼€
</span><span class="c1"></span>        <span class="c1">//strategy.setEntityBooleanColumnRemoveIsPrefix(true);
</span><span class="c1"></span>
        <span class="c1">//ç”Ÿæˆè‡ªåŠ¨å¡«å……
</span><span class="c1"></span>        <span class="n">TableFill</span> <span class="n">createTime</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TableFill</span><span class="o">(</span><span class="s">&#34;create_time&#34;</span><span class="o">,</span> <span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT</span><span class="o">)</span><span class="o">;</span>
        <span class="n">TableFill</span> <span class="n">updateTime</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TableFill</span><span class="o">(</span><span class="s">&#34;update_time&#34;</span><span class="o">,</span> <span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT_UPDATE</span><span class="o">)</span><span class="o">;</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">TableFill</span><span class="o">&gt;</span> <span class="n">tableFills</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="o">&gt;</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">tableFills</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">createTime</span><span class="o">)</span><span class="o">;</span>
        <span class="n">tableFills</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">updateTime</span><span class="o">)</span><span class="o">;</span>
        <span class="n">strategy</span><span class="o">.</span><span class="na">setTableFillList</span><span class="o">(</span><span class="n">tableFills</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//ç”Ÿæˆä¹è§‚é”çš„åˆ—ï¼Œversion å­—æ®µï¼Œè¿™é‡Œæˆ‘æ²¡æœ‰ç”¨ï¼Œå°±æ³¨é‡Šæ‰
</span><span class="c1"></span>        <span class="c1">//strategy.setVersionFieldName(&#34;version&#34;);
</span><span class="c1"></span>
        <span class="c1">//RestFul API
</span><span class="c1"></span>        <span class="n">strategy</span><span class="o">.</span><span class="na">setRestControllerStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>
        <span class="c1">//url é©¼å³°å‘½åï¼Œè½¬æ¢ä¸º_
</span><span class="c1"></span>        <span class="n">strategy</span><span class="o">.</span><span class="na">setControllerMappingHyphenStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>

        <span class="n">mpg</span><span class="o">.</span><span class="na">setStrategy</span><span class="o">(</span><span class="n">strategy</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//æ‰§è¡Œ
</span><span class="c1"></span>        <span class="n">mpg</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

    <span class="o">}</span>

</code></pre></div><p><a href="https://blog.csdn.net/qq_39809458/article/details/90667544"target="_blank">ç½‘å‹çš„è¸©å‘æ—¥è®°</a></p>
<h4 id="æ¡ä»¶æ„é€ å™¨">æ¡ä»¶æ„é€ å™¨</h4>
<p>èˆ’æœå•Šï¼Œè¿™æ ·,ç‰¹åˆ«æ˜¯ lambdaWrapperï¼Œç¾æ»‹æ»‹å¥½å§</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">        <span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">queryWrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="o">&gt;</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">queryWrapper</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">User</span><span class="o">:</span><span class="o">:</span><span class="n">getName</span><span class="o">,</span><span class="s">&#34;halo&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">lt</span><span class="o">(</span><span class="n">User</span><span class="o">:</span><span class="o">:</span><span class="n">getAge</span><span class="o">,</span><span class="n">25</span><span class="o">)</span><span class="o">;</span>

        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectOne</span><span class="o">(</span><span class="n">queryWrapper</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">)</span><span class="o">;</span>
</code></pre></div><p><a href="https://mp.baomidou.com/guide/wrapper.html#abstractwrapper"target="_blank">æ¡ä»¶æ„é€ å™¨å®˜ç½‘æ–‡æ¡£</a></p>
</article></div><section class="article navigation"><p><a class="link" href="/post/java8/"><span class="li">&rarr;</span>Java8</a></p></section></div><section id="footer" class="footer"><div class="footer-wrap">
    <p class="copyright">Â©2020 gejigejiemmm.</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></section></div>
</body>

</html>