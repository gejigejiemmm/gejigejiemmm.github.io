<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.64.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>javaä¸­çš„åå°„&nbsp;&ndash;&nbsp;gejigejiemmm</title><link rel="stylesheet" href="/css/core.min.a5d63d306fa53cba7bcef6c96fd6b55a008ea5736acaf25aace71f2bd7b379b2d97257d9c332e405e82f4f6e980f8409.css" integrity="sha384-pdY9MG&#43;lPLp7zvbJb9a1WgCOpXNqyvJarOcfK9ezebLZclfZwzLkBegvT26YD4QJ"><body>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/tomato.png" alt /><span class="site name">gejigejiemmm</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="https://github.com/gejigejiemmm/"target="_blank">Github</a><a class="nav item" href="https://gohugo.io/"target="_blank">Hugo</a></nav></div></span></div><div class="site slogan"><span class="title">haloğŸ˜Š</span></div></section><div id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">javaä¸­çš„åå°„</h1><p class="article date">Wednesday, March 4, 2020</p></section><article class="article markdown-body"><h2 id="åå°„">åå°„</h2>
<p>åå°„æ˜¯åŠ¨æ€æ€§çš„
åå°„æœºåˆ¶å…è®¸ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œä½¿ç”¨åå°„æ¥è·å–ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼Œå¹¶èƒ½æ“ä½œä»»ä½•ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ¡†æ¶ä¸­å¸¸æœ‰ç”¨åˆ°</p>
<p>åœ¨javaä¸­ï¼ŒåŠ è½½å®Œä¹‹åï¼Œä¼šåœ¨å †å†…å­˜ä¸­çš„æ–¹æ³•åŒºä¸­ä¼šç”Ÿæˆä¸€ä¸ª Classç±»å‹å¯¹è±¡ï¼ˆä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼‰è¿™ä¸ªå¯¹è±¡åŒ…å«äº†è¿™ä¸ªç±»å®Œæ•´çš„ç»“æ„ä¿¡æ¯</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹
æˆ‘ä»¬éƒ½æ˜¯å¼•å…¥éœ€è¦çš„åŒ…ç±»åç§° -&gt; ç„¶åé€šè¿‡ new å®ä¾‹åŒ–-&gt;å–å¾—å®ä¾‹åŒ–å¯¹è±¡</p>
<p>è€Œåœ¨åå°„æƒ…å†µä¸‹
å®ä¾‹åŒ–å¯¹è±¡-&gt; getClass -&gt; å¾—åˆ°å®Œæ•´çš„åŒ…ç±»åç§°</p>
<h3 id="å…³äºjavaä¸­-javalangclassç±»çš„ç†è§£">å…³äºjavaä¸­ java.lang.Classç±»çš„ç†è§£</h3>
<p>ä»ç±»çš„åŠ è½½è¿‡ç¨‹æ¥çœ‹ï¼š</p>
<p>ç¨‹åºåœ¨ç»è¿‡javac å‘½ä»¤ä»¥åä¼šç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ª classï¼ˆå­—èŠ‚ç ï¼‰æ–‡ä»¶
æ¥ç€æˆ‘ä»¬ä½¿ç”¨java è¿™ä¸ªå‘½ä»¤å¯¹å­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè§£é‡Šè¿è¡Œï¼Œå°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œï¼ˆåŠ è½½åˆ°å†…å­˜ä¸­çš„è¿‡ç¨‹ï¼Œå°±ç§°ä¸ºç±»çš„åŠ è½½ï¼‰
åŠ è½½åˆ°å†…å­˜ä¸­çš„ç±»ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè¿è¡Œæ—¶ç±»ï¼Œæ­¤è¿è¡Œæ—¶ç±»å°±ä½œä¸º Class çš„ä¸€ä¸ªå®ä¾‹</p>
<p>æ¢å¥è¯è¯´ï¼ŒClasså¯¹è±¡å¯¹åº”ç€ä¸€ä¸ªè¿è¡Œæ—¶ç±»</p>
<h3 id="è·å–-class-å¯¹è±¡çš„æ–¹å¼">è·å– Class å¯¹è±¡çš„æ–¹å¼</h3>
<p>å‰ä¸‰ä¸ªè¦æ±‚æŒæ¡ï¼Œå…¶ä¸­ï¼Œç¬¬ä¸‰ä¸ªä½¿ç”¨é¢‘ç‡æ›´å¤š</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">        <span class="c1">//æ–¹å¼ä¸€
</span><span class="c1"></span>        <span class="n">Class</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="c1">//Class&lt;Person&gt; clazz = Person.class;
</span><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clazz</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//æ–¹å¼äºŒ
</span><span class="c1"></span>        <span class="n">Person</span> <span class="n">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">Class</span> <span class="n">clazz1</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="na">getClass</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clazz1</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//æ–¹å¼ä¸‰
</span><span class="c1"></span>        <span class="c1">//è°ƒç”¨Class çš„é™æ€æ–¹æ³• forName ( String classPath)
</span><span class="c1"></span>        <span class="n">Class</span><span class="o">&lt;</span><span class="o">?</span><span class="o">&gt;</span> <span class="n">clazz2</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;reflection.Person&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clazz2</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//æ–¹å¼å››ï¼Œä½œäº†è§£ï¼Œä¸è¦æ±‚æŒæ¡
</span><span class="c1"></span>        <span class="n">ClassLoader</span> <span class="n">classLoader</span> <span class="o">=</span> <span class="n">ReflectionTest</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">Class</span> <span class="n">clazz4</span> <span class="o">=</span> <span class="n">classLoader</span><span class="o">.</span><span class="na">loadClass</span><span class="o">(</span><span class="s">&#34;reflection.Person&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clazz4</span><span class="o">)</span><span class="o">;</span>
</code></pre></div><h3 id="é€šè¿‡åå°„åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡">é€šè¿‡åå°„åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡</h3>
<p>ä½¿ç”¨åå°„åˆ›å»ºè¿è¡Œæ—¶å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ Class.forName(String classPath)
è¿™ä¸ªæ–¹æ³•æ¥è·å–è¿è¡Œæ—¶å¯¹è±¡ ç„¶åé€šè¿‡ newInstance() æ–¹æ³•è·å–ç±»çš„å¯¹è±¡ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">        <span class="n">Class</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">clazz</span> <span class="o">=</span> <span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="o">)</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;reflection.Person&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">Person</span> <span class="n">o</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">o</span><span class="o">)</span><span class="o">;</span>
</code></pre></div><h4 id="ä½“ç°åå°„çš„åŠ¨æ€æ€§">ä½“ç°åå°„çš„åŠ¨æ€æ€§</h4>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClassNotFoundException</span><span class="o">,</span> <span class="n">IllegalAccessException</span><span class="o">,</span> <span class="n">InstantiationException</span> <span class="o">{</span>
        <span class="c1">//ä½“ç°åå°„çš„ åŠ¨æ€æ€§
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="n">3</span><span class="o">)</span><span class="o">;</span><span class="c1">//0,1,2
</span><span class="c1"></span>        <span class="n">String</span> <span class="n">classPath</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="o">;</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">random</span><span class="o">)</span><span class="o">{</span>
            <span class="k">case</span> <span class="n">0</span><span class="o">:</span>
                <span class="n">classPath</span> <span class="o">=</span> <span class="s">&#34;java.lang.String&#34;</span><span class="o">;</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="n">1</span><span class="o">:</span>
                <span class="n">classPath</span> <span class="o">=</span> <span class="s">&#34;reflection.Person&#34;</span><span class="o">;</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="n">2</span><span class="o">:</span>
                <span class="n">classPath</span> <span class="o">=</span> <span class="s">&#34;java.lang.Object&#34;</span><span class="o">;</span>
                <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">Object</span> <span class="n">instance</span> <span class="o">=</span> <span class="n">getInstance</span><span class="o">(</span><span class="n">classPath</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">instance</span><span class="o">.</span><span class="na">getClass</span><span class="o">(</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getInstance</span><span class="o">(</span><span class="n">String</span> <span class="n">classPath</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClassNotFoundException</span><span class="o">,</span> <span class="n">IllegalAccessException</span><span class="o">,</span> <span class="n">InstantiationException</span> <span class="o">{</span>
        <span class="n">Class</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">classPath</span><span class="o">)</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">clazz</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div><h3 id="åå°„æœºåˆ¶ä¸å¯¹è±¡çš„å°è£…è¡ŒçŸ›ç›¾å—">åå°„æœºåˆ¶ä¸å¯¹è±¡çš„å°è£…è¡ŒçŸ›ç›¾å—ï¼Ÿ</h3>
<p>ä¸çŸ›ç›¾
å°è£…é‡Œprivate æ›´æƒ³å‘Šè¯‰ä½ ï¼Œè¿™ä¸ªæ–¹æ³•ä½ æ˜¯ç”¨ä¸åˆ°çš„ï¼Œå°±ä¸è¦ç”¨äº†ï¼Œä¸€èˆ¬æ˜¯æˆ‘è‡ªå·±å†…éƒ¨ä½¿ç”¨çš„ã€‚
æˆ‘ç»™ä½ å…¬å¼€æä¾›çš„æ–¹æ³•ï¼Œæ›´å¥½
å°½ç®¡æˆ‘æŠŠæƒé™ç§æœ‰èµ·æ¥äº†ï¼Œä½†æ˜¯ä½ éè¦è°ƒç”¨çš„è¯ï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†ä¸€èˆ¬ä½ è¦é€šè¿‡åå°„ä¹‹åè‡ªå·±åšçš„æ“ä½œï¼Œæˆ‘åœ¨å…¬å¼€æ–¹æ³•é‡Œéƒ½ç»™ä½ åšå¥½äº†ã€‚é‚£åˆä½•å¿…å‘¢</p>
<h3 id="é€šè¿‡åå°„è·å–è¿è¡Œæ—¶ç±»çš„å®Œæ•´ç»“æ„">é€šè¿‡åå°„è·å–è¿è¡Œæ—¶ç±»çš„å®Œæ•´ç»“æ„</h3>
<h4 id="è·å–è¿è¡Œæ—¶ç±»çš„å±æ€§">è·å–è¿è¡Œæ—¶ç±»çš„å±æ€§</h4>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">TestField</span><span class="o">(</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClassNotFoundException</span> <span class="o">{</span>

        <span class="n">Class</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;reflection.Test.Person&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="n">Field</span><span class="o">[</span><span class="o">]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getFields</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//ä¼šå‘ç°éƒ½æ˜¯ public æ ‡è¯†çš„æˆå‘˜å˜é‡ï¼Œä¸”åŒ…å«çˆ¶ç±»å±æ€§
</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Field</span> <span class="n">f</span> <span class="o">:</span> <span class="n">fields</span><span class="o">)</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------------------&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//è·å–å½“å‰ç±»è‡ªå·±å®šä¹‰çš„æ‰€æœ‰ï¼ˆä¸çœ‹æƒé™ä¿®é¥°ç¬¦ï¼‰å±æ€§ï¼Œä½†ä¸åŒ…æ‹¬çˆ¶ç±»å±æ€§
</span><span class="c1"></span>        <span class="n">Field</span><span class="o">[</span><span class="o">]</span> <span class="n">declaredFields</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredFields</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">Field</span> <span class="n">f</span> <span class="o">:</span> <span class="n">declaredFields</span><span class="o">)</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;------------------&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">Field</span> <span class="n">f</span> <span class="o">:</span> <span class="n">declaredFields</span><span class="o">)</span><span class="o">{</span>
            <span class="c1">//æƒé™ä¿®é¥°ç¬¦,ä½†æ˜¯è¿”å›çš„æ˜¯ int ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¦è½¬ä¸ºstringç±»å‹ Modifier.toString()
</span><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">(</span><span class="o">)</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;\t&#34;</span><span class="o">)</span><span class="o">;</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getType</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">getName</span><span class="o">(</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;\t&#34;</span><span class="o">)</span><span class="o">;</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span>

    <span class="o">}</span>
</code></pre></div><p>å…¶ä»–çš„å¯ä»¥ä¸åŠ æ¼”ç¤ºï¼Œä»¥è·å–å±æ€§ä¸ºä¾‹ï¼šä½ å¯ä»¥ä»ä»£ç é‡Œå‘ç°
ç›´æ¥getXXX() è·å–çš„æ˜¯åŒ…å«çˆ¶ç±»çš„ï¼Œä½†æ˜¯æƒé™ä¿®é¥°ç¬¦ å¿…é¡»æ˜¯ public
å¦‚æœ getDeclaredXXX()æ–¹æ³•çš„è¯ï¼Œ è·å–çš„æ˜¯è‡ªå·±æ‰€å®šä¹‰çš„æ‰€æœ‰çš„ï¼Œä¸åŒ…å«çˆ¶ç±»ï¼Œä¸å—è®¿é—®æƒé™çº¦æŸ
è·å–è¿è¡Œæ—¶ç±»çš„æ–¹æ³•ç»“æ„åŒç†</p>
<h4 id="è·å–è¿è¡Œæ—¶ç±»çš„æ–¹æ³•">è·å–è¿è¡Œæ—¶ç±»çš„æ–¹æ³•</h4>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">TestMethod</span><span class="o">(</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ClassNotFoundException</span> <span class="o">{</span>
        <span class="n">Class</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">&#34;reflection.Test.Person&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//è·å– å½“å‰ç±»å’Œçˆ¶ç±» publicæƒé™çš„æ–¹æ³•
</span><span class="c1"></span>        <span class="n">Method</span><span class="o">[</span><span class="o">]</span> <span class="n">methods</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getMethods</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">method</span> <span class="o">:</span><span class="n">methods</span><span class="o">)</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">method</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;---------------&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//è·å–å½“å‰è¿è¡Œæ—¶ç±» å½“ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œ ä¸åŒ…å«çˆ¶ç±»ï¼Œä¸åœ¨ä¹æƒé™
</span><span class="c1"></span>        <span class="n">Method</span><span class="o">[</span><span class="o">]</span> <span class="n">declaredMethods</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredMethods</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">method</span><span class="o">:</span><span class="n">declaredMethods</span><span class="o">)</span><span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">method</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;---------------&#34;</span><span class="o">)</span><span class="o">;</span>


        <span class="c1">//è·å–æ–¹æ³•å…·ä½“ç»“æ„ï¼Œ æƒé™ç¬¦ è¿”å›å€¼ æ–¹æ³•åå­— (å‚æ•°ç±»å‹ å‚æ•°å )
</span><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">Method</span> <span class="n">method</span><span class="o">:</span><span class="n">declaredMethods</span><span class="o">)</span><span class="o">{</span>

            <span class="c1">//è·å–æ³¨è§£
</span><span class="c1"></span>            <span class="n">Annotation</span><span class="o">[</span><span class="o">]</span> <span class="n">annotations</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getAnnotations</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">Annotation</span> <span class="n">annotation</span> <span class="o">:</span><span class="n">annotations</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">annotation</span> <span class="o">+</span> <span class="s">&#34;\t&#34;</span><span class="o">)</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">//è·å–æƒé™ä¿®é¥°ç¬¦
</span><span class="c1"></span>            <span class="kt">int</span> <span class="n">modifiers</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">modifiers</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;\t&#34;</span><span class="o">)</span><span class="o">;</span>

            <span class="c1">//è¿”å›å€¼ç±»å‹
</span><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getReturnType</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">getName</span><span class="o">(</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;\t&#34;</span><span class="o">)</span><span class="o">;</span>

            <span class="c1">//æ–¹æ³•å
</span><span class="c1"></span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">(</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;\t(&#34;</span><span class="o">)</span><span class="o">;</span>

            <span class="c1">//å½¢å‚åˆ—è¡¨
</span><span class="c1"></span>            <span class="n">Class</span><span class="o">&lt;</span><span class="o">?</span><span class="o">&gt;</span><span class="o">[</span><span class="o">]</span> <span class="n">parameterTypes</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getParameterTypes</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

            <span class="k">if</span> <span class="o">(</span><span class="o">!</span><span class="o">(</span><span class="n">parameterTypes</span><span class="o">.</span><span class="na">length</span> <span class="o">=</span><span class="o">=</span> <span class="n">0</span> <span class="o">|</span><span class="o">|</span> <span class="n">parameterTypes</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span> <span class="o">)</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">parameterTypes</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="o">)</span><span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span><span class="o">=</span> <span class="n">parameterTypes</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span><span class="o">{</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">parameterTypes</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="o">.</span><span class="na">getName</span><span class="o">(</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;  args_&#34;</span> <span class="o">+</span> <span class="n">i</span><span class="o">)</span><span class="o">;</span>
                    <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">parameterTypes</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="o">.</span><span class="na">getName</span><span class="o">(</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34;  args_&#34;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&#34;,&#34;</span><span class="o">)</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&#34;)&#34;</span><span class="o">)</span><span class="o">;</span>


            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
            
        <span class="o">}</span>

    <span class="o">}</span>
</code></pre></div><h3 id="è·å¾—è¿è¡Œæ—¶ç±»çš„æŒ‡å®šç»“æ„">è·å¾—è¿è¡Œæ—¶ç±»çš„æŒ‡å®šç»“æ„</h3>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java">        <span class="n">Class</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
        <span class="c1">//é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡
</span><span class="c1"></span>        <span class="c1">//è·å–æ„é€ å™¨
</span><span class="c1"></span>        <span class="n">Constructor</span> <span class="n">constructor</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredConstructor</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="kt">int</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>
        <span class="n">Object</span> <span class="n">tom</span> <span class="o">=</span> <span class="n">constructor</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="s">&#34;tom&#34;</span><span class="o">,</span> <span class="n">12</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">tom</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//é€šè¿‡åå°„ã€‚è°ƒç”¨å¯¹è±¡æŒ‡å®šçš„å±æ€§å’Œæ–¹æ³•,è¿™ä¸ªæ—¶å€™ï¼Œè¿˜ä¸èƒ½ç›´æ¥è·å–private ä¿®é¥°çš„å±æ€§
</span><span class="c1"></span>        <span class="n">Field</span> <span class="n">age</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">age</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">tom</span><span class="o">,</span><span class="n">10</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">tom</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//é€šè¿‡åå°„è°ƒç”¨æ–¹æ³•
</span><span class="c1"></span>        <span class="n">Method</span> <span class="n">show</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredMethod</span><span class="o">(</span><span class="s">&#34;show&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">show</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">tom</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//é€šè¿‡åå°„è°ƒç”¨ç§æœ‰ç»“æ„
</span><span class="c1"></span>        <span class="n">Constructor</span> <span class="n">constructor1</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredConstructor</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>
        <span class="n">constructor1</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>
        <span class="n">Person</span> <span class="n">jerry</span> <span class="o">=</span> <span class="o">(</span><span class="n">Person</span><span class="o">)</span> <span class="n">constructor1</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="s">&#34;jerry&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">jerry</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//è°ƒç”¨ç§æœ‰çš„å±æ€§
</span><span class="c1"></span>        <span class="n">Field</span> <span class="n">name</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">name</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>
        <span class="n">name</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">tom</span><span class="o">,</span><span class="s">&#34;jerry&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">tom</span><span class="o">)</span><span class="o">;</span>

        <span class="c1">//è°ƒç”¨ç§æœ‰æ–¹æ³•,æœ‰å‚æ•°çš„è¯ï¼Œè¦æŒ‡å®šå‚æ•°ç±»å‹
</span><span class="c1"></span>        <span class="n">Method</span> <span class="n">hello</span> <span class="o">=</span> <span class="n">clazz</span><span class="o">.</span><span class="na">getDeclaredMethod</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>
        <span class="n">hello</span><span class="o">.</span><span class="na">setAccessible</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">returnValue</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">hello</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">jerry</span><span class="o">,</span> <span class="s">&#34;tom&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">returnValue</span><span class="o">)</span><span class="o">;</span>
</code></pre></div><p>è¿™ä¸ªä¸è·å–å®Œæ•´ç»“æ„ä¸åŒä¹‹å¤„å°±æ˜¯å‚æ•°ä¸åŒï¼ŒæŒ‡å®šå‡ºä½ è¦çš„æ–¹æ³•åã€‚
ä½†æ˜¯æ³¨æ„ï¼Œå¦‚æœä½ è¦è·å–çš„æ˜¯ private è¦è®¾ç½® XXX.setAccessible(true);æ¥ä¿è¯å½“å‰æ–¹æ³•å¯ä»¥è¢«è®¿é—®ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<p>å½“ä½ è·å–æ–¹æ³•æ—¶ï¼Œå¦‚æœéœ€è¦å‚æ•°ï¼Œé‚£ä¹ˆå°±è¦æŒ‡å®šå‚æ•°ç±»å‹ï¼Œå¦‚æœä½ æƒ³è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ invoke() è¿™ä¸ªæ–¹æ³•å»æ‰§è¡Œï¼Œå¦‚æœè¢«è°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆ invokeæ–¹æ³•ä¼šå¸®ä½ è¿”å›è¿™ä¸ªå€¼</p>
<p>invoke() ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ è°ƒç”¨ç±»ï¼Œä¹Ÿå°±æ˜¯ä½ éœ€è¦è°ƒç”¨å“ªä¸ªå¯¹è±¡çš„è¯¥æ–¹æ³•
ä¸¾ä¾‹æ¥è®²ï¼š hello.invoke(jerry, &ldquo;tom&rdquo;); è¦è°ƒç”¨çš„æ˜¯ jerry.hello();
å¦‚æœè¯¥ç±»é‡Œé¢æ²¡æœ‰ hello è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™æŠ¥é”™ã€‚</p>
</article><section class="article labels"><a class="category" href=/categories/java/>java</a><a class="tag" href=/tags/java%E9%AB%98%E7%BA%A7/>javaé«˜çº§</a></section></div><section class="article navigation"><p><a class="link" href="/post/java8/"><span class="li">&larr;</span>Java8</a></p><p><a class="link" href="/post/annotation/"><span class="li">&rarr;</span>å°ç™½éƒ½èƒ½ç†è§£çš„javaæ³¨è§£</a></p></section></div><section id="footer" class="footer"><div class="footer-wrap">
    <p class="copyright">Â©2020 gejigejiemmm.</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></section></div>
</body>

</html>